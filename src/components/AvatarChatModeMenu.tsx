import React from 'react';
import { motion } from "motion/react";

// --- SVG Paths ---
const svgPaths = {
  p27424400: "M8.00261 1.33353C8.57794 1.33353 9.13661 1.40686 9.66928 1.54353L9.33594 2.83486C8.54772 2.63134 7.72336 2.61096 6.92605 2.77529C6.12873 2.93962 5.37961 3.28428 4.73609 3.78288C4.09257 4.28148 3.57173 4.92078 3.21348 5.65179C2.85522 6.3828 2.66907 7.18612 2.66928 8.00019C2.66928 8.88953 2.88594 9.74486 3.29594 10.5109L3.52928 10.9462L3.09194 12.9109L5.05661 12.4742L5.49194 12.7075C6.26436 13.1202 7.12689 13.3352 8.00261 13.3335C8.75668 13.3335 9.50218 13.1736 10.1899 12.8644C10.8777 12.5551 11.492 12.1036 11.9924 11.5395C12.4928 10.9754 12.8679 10.3115 13.093 9.59184C13.318 8.87213 13.3879 8.11288 13.2979 7.36419L14.6226 7.20686C14.6537 7.46686 14.6693 7.7313 14.6693 8.00019C14.6693 11.6822 11.6846 14.6669 8.00261 14.6669C6.90753 14.6684 5.82906 14.3991 4.86328 13.8829L1.33594 14.6669L2.11994 11.1395C1.60374 10.1737 1.33441 9.09528 1.33594 8.00019C1.33594 4.31819 4.32061 1.33353 8.00261 1.33353ZM13.0226 0.880193C13.0479 0.817779 13.0912 0.764327 13.147 0.72669C13.2028 0.689053 13.2686 0.668945 13.3359 0.668945C13.4033 0.668945 13.4691 0.689053 13.5249 0.72669C13.5807 0.764327 13.624 0.817779 13.6493 0.880193L13.8186 1.28686C14.1016 1.97691 14.6385 2.53215 15.3186 2.83819L15.7966 3.05153C15.8578 3.07985 15.9096 3.12509 15.9459 3.18191C15.9823 3.23873 16.0016 3.30476 16.0016 3.37219C16.0016 3.43963 15.9823 3.50566 15.9459 3.56248C15.9096 3.6193 15.8578 3.66454 15.7966 3.69286L15.2913 3.91819C14.6277 4.21547 14.0996 4.75067 13.8113 5.41819L13.6473 5.79553C13.6216 5.85697 13.5784 5.90946 13.523 5.94638C13.4676 5.98329 13.4025 6.00299 13.3359 6.00299C13.2694 6.00299 13.2043 5.98329 13.1489 5.94638C13.0935 5.90946 13.0502 5.85697 13.0246 5.79553L12.8599 5.41886C12.5719 4.75121 12.0441 4.21577 11.3806 3.91819L10.8739 3.69286C10.8126 3.66462 10.7606 3.61937 10.7241 3.56248C10.6876 3.50558 10.6683 3.43943 10.6683 3.37186C10.6683 3.30429 10.6876 3.23813 10.7241 3.18124C10.7606 3.12435 10.8126 3.0791 10.8739 3.05086L11.3526 2.83753C12.0328 2.53194 12.5698 1.9772 12.8533 1.28753L13.0226 0.880193Z",
  p22ebd300: "M4.03281 11.8503C3.81059 11.728 3.63837 11.5643 3.51615 11.3589C3.39392 11.1536 3.33281 10.9229 3.33281 10.6669V7.46694L1.73281 6.5836C1.61059 6.51694 1.5217 6.4336 1.46615 6.3336C1.41059 6.2336 1.38281 6.12249 1.38281 6.00027C1.38281 5.87805 1.41059 5.76694 1.46615 5.66694C1.5217 5.56694 1.61059 5.4836 1.73281 5.41694L7.36615 2.35027C7.46615 2.29472 7.56903 2.25294 7.67481 2.22494C7.78059 2.19694 7.88881 2.18316 7.99948 2.1836C8.11015 2.18405 8.21859 2.19805 8.32481 2.2256C8.43104 2.25316 8.5337 2.29472 8.63281 2.35027L14.9828 5.81694C15.0939 5.87249 15.1801 5.95316 15.2415 6.05894C15.3028 6.16472 15.3333 6.27849 15.3328 6.40027V10.6669C15.3328 10.8558 15.2688 11.0143 15.1408 11.1423C15.0128 11.2703 14.8546 11.334 14.6661 11.3336C14.4777 11.3332 14.3195 11.2692 14.1915 11.1416C14.0635 11.014 13.9995 10.8558 13.9995 10.6669V6.7336L12.6661 7.46694V10.6669C12.6661 10.9225 12.605 11.1532 12.4828 11.3589C12.3606 11.5647 12.1884 11.7285 11.9661 11.8503L8.63281 13.6503C8.53281 13.7058 8.43015 13.7476 8.32481 13.7756C8.21948 13.8036 8.11104 13.8174 7.99948 13.8169C7.88792 13.8165 7.77948 13.8027 7.67415 13.7756C7.56881 13.7485 7.46615 13.7067 7.36615 13.6503L4.03281 11.8503ZM7.99948 8.46694L12.5661 6.00027L7.99948 3.5336L3.43281 6.00027L7.99948 8.46694ZM7.99948 12.4836L11.3328 10.6836V8.16694L8.64948 9.65027C8.54948 9.70583 8.44392 9.7476 8.33281 9.7756C8.2217 9.8036 8.11059 9.81738 7.99948 9.81694C7.88837 9.81649 7.77726 9.80272 7.66615 9.7756C7.55504 9.74849 7.44948 9.70672 7.34948 9.65027L4.66615 8.16694V10.6836L7.99948 12.4836Z",
  p1627f280: "M5.93333 13.9337V3.93366C5.93333 3.75685 5.8631 3.58728 5.73807 3.46225C5.61305 3.33723 5.44348 3.26699 5.26667 3.26699H1.93333C1.57971 3.26699 1.24057 3.40747 0.990524 3.65752C0.740476 3.90757 0.6 4.2467 0.6 4.60033V12.6003C0.6 12.9539 0.740476 13.2931 0.990524 13.5431C1.24057 13.7932 1.57971 13.9337 1.93333 13.9337H9.93333C10.287 13.9337 10.6261 13.7932 10.8761 13.5431C11.1262 13.2931 11.2667 12.9539 11.2667 12.6003V9.26699C11.2667 9.09018 11.1964 8.92061 11.0714 8.79559C10.9464 8.67056 10.7768 8.60033 10.6 8.60033H0.6",
  p18c8ad00: "M13.2667 0.6H9.26667C8.89848 0.6 8.6 0.898477 8.6 1.26667V5.26667C8.6 5.63486 8.89848 5.93333 9.26667 5.93333H13.2667C13.6349 5.93333 13.9333 5.63486 13.9333 5.26667V1.26667C13.9333 0.898477 13.6349 0.6 13.2667 0.6Z",
  p4c860e0: "M5.43333 12.9333H4.6C3.53913 12.9333 2.52172 12.5119 1.77157 11.7618C1.02143 11.0116 0.6 9.9942 0.6 8.93333V4.6C0.6 3.53913 1.02143 2.52172 1.77157 1.77157C2.52172 1.02143 3.53913 0.6 4.6 0.6H8.93333C9.9942 0.6 11.0116 1.02143 11.7618 1.77157C12.5119 2.52172 12.9333 3.53913 12.9333 4.6V5.43333",
  p15915780: "M9.41106 10.009L9.07106 11.9817C9.02699 12.1395 8.9341 12.2793 8.80569 12.3811C8.67729 12.4829 8.51996 12.5414 8.35624 12.5483C8.19253 12.5552 8.03085 12.5101 7.89435 12.4194C7.75785 12.3288 7.65355 12.1973 7.59639 12.0437L5.73706 6.78903C5.68625 6.65011 5.6762 6.49956 5.70811 6.35512C5.74001 6.21068 5.81253 6.07837 5.91713 5.97377C6.02173 5.86917 6.15404 5.79665 6.29848 5.76475C6.44292 5.73284 6.59347 5.74289 6.73239 5.7937L12.0897 7.65237C12.2489 7.70723 12.3858 7.81236 12.48 7.95188C12.5742 8.09141 12.6204 8.25777 12.6118 8.42588C12.6031 8.59398 12.54 8.75472 12.432 8.88384C12.324 9.01296 12.177 9.10346 12.0131 9.1417L9.93773 9.4817C9.81291 9.51867 9.69933 9.58629 9.60733 9.67839C9.51534 9.7705 9.44787 9.88417 9.41106 10.009Z",
  p19a9c600: "M3.98127 0.833008H4.0226C4.47194 0.833008 4.83927 0.833008 5.13727 0.857674C5.44594 0.882341 5.72527 0.936341 5.98527 1.06901C6.39285 1.27672 6.72423 1.6081 6.93194 2.01567C7.06527 2.27634 7.1186 2.55567 7.14394 2.86434C7.1686 3.16234 7.1686 3.52967 7.1686 3.97901V4.28767L8.53927 2.91701C8.8566 2.59967 9.11594 2.34034 9.34394 2.14634C9.5806 1.94634 9.81594 1.78634 10.0939 1.69634C10.529 1.55504 10.9976 1.55504 11.4326 1.69634C11.7113 1.78701 11.9459 1.94567 12.1826 2.14634C12.4106 2.33967 12.6706 2.59967 12.9879 2.91701L13.0173 2.94701C13.3346 3.26434 13.5946 3.52367 13.7879 3.75234C13.9886 3.98834 14.1479 4.22367 14.2379 4.50167C14.3794 4.93691 14.3794 5.40577 14.2379 5.84101C14.1479 6.11901 13.9886 6.35434 13.7879 6.59034C13.5946 6.81834 13.3346 7.07834 13.0173 7.39567L11.5799 8.83301H12.0226C12.4719 8.83301 12.8393 8.83301 13.1373 8.85767C13.4459 8.88234 13.7253 8.93634 13.9859 9.06901C14.3935 9.27671 14.7249 9.6081 14.9326 10.0157C15.0653 10.2763 15.1193 10.5557 15.1439 10.8643C15.1686 11.1623 15.1686 11.5297 15.1686 11.979V12.0203C15.1686 12.4697 15.1686 12.837 15.1439 13.135C15.1193 13.4437 15.0653 13.723 14.9326 13.9837C14.7249 14.3913 14.3935 14.7226 13.9859 14.9303C13.7253 15.063 13.4459 15.117 13.1373 15.1417C12.8393 15.1663 12.4719 15.1663 12.0226 15.1663H3.98194C3.5326 15.1663 3.16527 15.1663 2.86727 15.1417C2.5586 15.117 2.27927 15.063 2.01927 14.9303C1.61169 14.7226 1.28031 14.3913 1.0726 13.9837C0.939271 13.723 0.885937 13.4437 0.860604 13.135C0.835937 12.837 0.835938 12.4697 0.835938 12.0203V3.97967C0.835938 3.53034 0.835937 3.16367 0.860604 2.86501C0.885271 2.55634 0.939271 2.27701 1.07194 2.01701C1.27964 1.60943 1.61103 1.27805 2.0186 1.07034C2.27927 0.937008 2.5586 0.883674 2.86727 0.858341C3.16594 0.833674 3.5326 0.833675 3.98194 0.833675M6.8286 14.167H12.0019C12.4766 14.167 12.8033 14.167 13.0553 14.1457C13.3026 14.1257 13.4353 14.089 13.5319 14.0397C13.7513 13.9277 13.9296 13.7492 14.0413 13.5297C14.0906 13.4337 14.1279 13.301 14.1479 13.0543C14.1679 12.801 14.1686 12.475 14.1686 12.0003C14.1686 11.5257 14.1686 11.199 14.1473 10.947C14.1273 10.6997 14.0906 10.567 14.0413 10.4703C13.9293 10.251 13.7508 10.0727 13.5313 9.96101C13.4353 9.91167 13.3026 9.87434 13.0559 9.85434C12.8026 9.83434 12.4766 9.83367 12.0019 9.83367H10.5799L7.12927 13.2843C7.1056 13.5275 7.03901 13.7645 6.9326 13.9843C6.90095 14.047 6.86668 14.108 6.8286 14.167ZM7.1686 11.831L12.2953 6.70434C12.6313 6.36834 12.8619 6.13767 13.0259 5.94434C13.1859 5.75501 13.2539 5.63501 13.2873 5.53234C13.3633 5.29814 13.3633 5.04588 13.2873 4.81167C13.2539 4.70901 13.1859 4.58901 13.0259 4.40034C12.8613 4.20701 12.6313 3.97567 12.2953 3.64034C11.9593 3.30434 11.7286 3.07367 11.5353 2.90967C11.3466 2.74967 11.2266 2.68167 11.1239 2.64834C10.8895 2.57214 10.637 2.57214 10.4026 2.64834C10.3006 2.68167 10.1806 2.74901 9.99127 2.90967C9.79794 3.07367 9.56727 3.30434 9.23127 3.63967L7.80327 5.06767C7.38927 5.48234 7.2866 5.59701 7.23194 5.72901C7.17794 5.85967 7.1686 6.01301 7.1686 6.59167V11.831ZM6.1686 12.0277C6.1686 12.4877 6.16794 12.8063 6.14727 13.0543C6.12727 13.301 6.0906 13.4343 6.04127 13.5297C5.92941 13.7493 5.75087 13.9278 5.53127 14.0397C5.43527 14.089 5.3026 14.1263 5.05594 14.1463C4.8026 14.1663 4.4766 14.167 4.00194 14.167C3.52727 14.167 3.2006 14.167 2.9486 14.1457C2.70127 14.1257 2.5686 14.089 2.4726 14.0397C2.253 13.9278 2.07447 13.7493 1.9626 13.5297C1.91327 13.4337 1.87594 13.301 1.85594 13.0543C1.83594 12.801 1.83527 12.475 1.83527 12.0003V3.99967C1.83527 3.52501 1.83527 3.19834 1.8566 2.94634C1.8766 2.69901 1.91327 2.56634 1.9626 2.47034C2.07447 2.25074 2.253 2.07221 2.4726 1.96034C2.5686 1.91101 2.70127 1.87367 2.94794 1.85367C3.20127 1.83367 3.52727 1.83301 4.00194 1.83301C4.4766 1.83301 4.80327 1.83301 5.05527 1.85434C5.3026 1.87434 5.43527 1.91101 5.53127 1.96034C5.75127 2.07234 5.92927 2.25034 6.04127 2.47034C6.0906 2.56634 6.12794 2.69901 6.14794 2.94567C6.16794 3.19901 6.1686 3.52501 6.1686 3.99967V12.0277ZM2.83527 12.6663C2.83527 12.5337 2.88795 12.4066 2.98172 12.3128C3.07549 12.219 3.20266 12.1663 3.33527 12.1663H4.6686C4.80121 12.1663 4.92839 12.219 5.02216 12.3128C5.11593 12.4066 5.1686 12.5337 5.1686 12.6663C5.1686 12.7989 5.11593 12.9261 5.02216 13.0199C4.92839 13.1137 4.80121 13.1663 4.6686 13.1663H3.33527C3.20266 13.1663 3.07549 13.1137 2.98172 13.0199C2.88795 12.9261 2.83527 12.7989 2.83527 12.6663Z"
};

// --- Icons ---
function RiChatAi3Line() {
  return (
    <div className="relative shrink-0 size-[16px]">
      <svg className="block size-full" fill="none" viewBox="0 0 16 16">
        <path d={svgPaths.p27424400} fill="currentColor" />
      </svg>
    </div>
  );
}

function MaterialSymbolsSchoolOutlineRounded() {
  return (
    <div className="relative shrink-0 size-[16px]">
      <svg className="block size-full" fill="none" viewBox="0 0 16 16">
        <path d={svgPaths.p22ebd300} fill="currentColor" />
      </svg>
    </div>
  );
}

function LucideBlocks() {
  return (
    <div className="overflow-clip relative shrink-0 size-[16px]">
      <div className="absolute inset-[-4.5%]">
        <svg className="block size-full" fill="none" viewBox="0 0 15 15">
          <path d={svgPaths.p1627f280} stroke="currentColor" strokeLinecap="round" strokeLinejoin="round" strokeWidth="1.2" />
          <path d={svgPaths.p18c8ad00} stroke="currentColor" strokeLinecap="round" strokeLinejoin="round" strokeWidth="1.2" />
        </svg>
      </div>
    </div>
  );
}

function MagePreview() {
  return (
    <div className="overflow-clip relative shrink-0 size-[16px]">
      <div className="absolute inset-[-4.86%]">
        <svg className="block size-full" fill="none" viewBox="0 0 14 14">
            <path d={svgPaths.p4c860e0} stroke="currentColor" strokeLinecap="round" strokeWidth="1.2" />
            <path d={svgPaths.p15915780} stroke="currentColor" strokeLinecap="round" strokeLinejoin="round" strokeWidth="1.2" />
        </svg>
      </div>
    </div>
  );
}

function SolarPaletteOutline() {
  return (
    <div className="relative shrink-0 size-[16px]">
      <svg className="block size-full" fill="none" viewBox="0 0 16 16">
        <path clipRule="evenodd" d={svgPaths.p19a9c600} fill="currentColor" fillRule="evenodd" />
      </svg>
    </div>
  );
}


// --- Menu Item Component ---
const itemVariants = {
  hidden: { opacity: 0, scale: 0.8, y: 10 },
  visible: { 
    opacity: 1, 
    scale: 1, 
    y: 0,
    transition: { type: "spring", stiffness: 300, damping: 20 }
  }
};

interface MenuItemProps {
    icon: React.ComponentType;
    label: string;
    gradient: string;
    textColor: string;
    iconColor: string;
    borderColor?: string;
    borderGradient?: string;
    onClick?: () => void;
}

function MenuItem({ icon: Icon, label, gradient, textColor, iconColor, borderColor = "rgba(255,255,255,0.1)", borderGradient, onClick }: MenuItemProps) {
  return (
    <motion.div 
        onClick={onClick}
        variants={itemVariants}
        className="content-stretch flex gap-[8px] h-[40px] items-center justify-center px-[14px] py-[6px] relative rounded-[60px] shrink-0 min-w-[106px] cursor-pointer backdrop-blur-[4px]" 
        style={{ backgroundImage: gradient }}
        whileHover={{ scale: 1.05 }}
        whileTap={{ scale: 0.95 }}
    >
      <div 
        aria-hidden="true" 
        className="absolute inset-[-0.8px] pointer-events-none rounded-[60.8px]" 
        style={borderGradient ? {
            padding: '0.8px',
            background: borderGradient,
            mask: 'linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0)',
            maskComposite: 'exclude',
            WebkitMaskComposite: 'xor'
        } : {
            border: `0.8px solid ${borderColor}`
        }} 
      />
      <div style={{ color: iconColor }}>
          <Icon />
      </div>
      <p className="font-['Urbanist',sans-serif] font-normal leading-[1.5] relative shrink-0 text-[13px] text-nowrap tracking-[0.26px]" style={{ color: textColor }}>{label}</p>
    </motion.div>
  );
}

const containerVariants = {
  hidden: { opacity: 0 },
  visible: {
    opacity: 1,
    transition: {
      staggerChildren: 0.05,
      delayChildren: 0.05
    }
  }
};

export default function AvatarChatModeMenu({ onSelect }: { onSelect?: (label: string) => void }) {
  return (
    <motion.div 
        variants={containerVariants}
        initial="hidden"
        animate="visible"
        className="flex flex-wrap gap-[16px] items-start justify-center relative w-full"
    >
      <MenuItem 
        icon={RiChatAi3Line} 
        label="Chat" 
        gradient="linear-gradient(113.699deg, rgba(255, 177, 255, 0.01) 68.456%, rgba(23, 27, 28, 0.36) 97.572%)"
        textColor="#fcfcfc"
        iconColor="#fcfcfc"
        borderColor="rgba(255,255,255,0.1)"
        borderGradient="linear-gradient(to right, rgba(255, 255, 255, 0.1) 0%, rgba(255, 177, 255, 0.5) 26%, rgba(255, 177, 255, 0.15) 53%, rgba(255, 177, 255, 0.15) 78%, rgba(255, 177, 255, 0.5) 100%)"
        onClick={() => onSelect?.("Chat")}
      />
      <MenuItem 
        icon={MaterialSymbolsSchoolOutlineRounded} 
        label="Experience" 
        gradient="linear-gradient(144.153deg, rgba(20, 20, 21, 0.6) 47.794%, rgba(23, 27, 28, 0.6) 100%)"
        textColor="#d0d0d4"
        iconColor="#d0d0d4"
        onClick={() => onSelect?.("Experience")}
      />
      <MenuItem 
        icon={LucideBlocks} 
        label="Store" 
        gradient="linear-gradient(144.153deg, rgba(20, 20, 21, 0.6) 47.794%, rgba(23, 27, 28, 0.6) 100%)"
        textColor="#d0d0d4"
        iconColor="#d0d0d4"
        onClick={() => onSelect?.("Store")}
      />
      <MenuItem 
        icon={MagePreview} 
        label="Creator" 
        gradient="linear-gradient(144.153deg, rgba(20, 20, 21, 0.6) 47.794%, rgba(23, 27, 28, 0.6) 100%)"
        textColor="#d0d0d4"
        iconColor="#d0d0d4"
        onClick={() => onSelect?.("Creator")}
      />
      <MenuItem 
        icon={SolarPaletteOutline} 
        label="Creator" 
        gradient="linear-gradient(144.153deg, rgba(20, 20, 21, 0.6) 47.794%, rgba(23, 27, 28, 0.6) 100%)"
        textColor="#d0d0d4"
        iconColor="#d0d0d4"
        onClick={() => onSelect?.("Creator")}
      />
    </motion.div>
  );
}
